<IfModule mod_rewrite.c>
    # Compat Apache 2.2/2.4
    RewriteEngine On
    RewriteBase /

    # Ne pas réécrire l'appel direct à index.php
    RewriteRule ^index\.php$ - [L]

    # Réécrire sauf fichiers (on laisse passer les dossiers)
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule . index.php [QSA,L]
</IfModule>

# Protection fichiers sensibles (2.2 et 2.4)
<FilesMatch "\.(json|tpl|ini|env)$">
    <IfModule mod_authz_core.c>
        Require all denied
    </IfModule>
    <IfModule !mod_authz_core.c>
        Order deny,allow
        Deny from all
    </IfModule>
</FilesMatch>

# Désactiver le listing
Options -Indexes

# Forcer index.php par défaut
<IfModule mod_dir.c>
    DirectoryIndex index.php
</IfModule>
